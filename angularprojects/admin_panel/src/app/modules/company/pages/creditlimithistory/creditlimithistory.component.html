<app-layout>
  <div id="creditlimitverification-page">
    <div class="main-wrapper">
      <div class="flexhead">
        <button
          mat-mini-fab
          onclick="history.go(-1); return false;"
          class="back back-btn"
        >
          <mat-icon>arrow_back</mat-icon>
        </button>
        <h2>Credit Limit History</h2>
      </div>

      <div class="mat-elevation-z1">
        <table
          mat-table
          matTableExporter
          [hiddenColumns]="[5]"
          #exporter="matTableExporter"
          [dataSource]="dataSource"
          matSort
          (matSortChange)="announceSortChange($event)"
          class="mat-elevation-z1"
        >
          <!-- Position Column -->
          <ng-container matColumnDef="company_name">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by company_name"
            >
              Company Name
            </th>
            <td mat-cell *matCellDef="let element">
              {{
                element && element.company && element.company.company_name
                  ? element.company.company_name
                  : ""
              }}
            </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="gstin" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by gstin"
            >
              GST No
            </th>
            <td mat-cell *matCellDef="let element">
              {{
                element && element.company && element.company.gstin
                  ? element.company.gstin
                  : ""
              }}
            </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="exist_credit_limit" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by existing_credit_limit"
            >
              Existing Credit Limit
            </th>
            <td mat-cell *matCellDef="let element">
              {{
                element && element.existing_credit_limit
                  ? element.existing_credit_limit
                  : ""
              }}
            </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="new_credit_limit" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by new_credit_limit"
            >
              New Credit Limit
            </th>
            <td mat-cell *matCellDef="let element" >
              {{
                element && element.new_credit_limit
                  ? element.new_credit_limit
                  : ""
              }}
            </td>
          </ng-container>

          <!-- created_at column-->
          <ng-container matColumnDef="created_at" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by company.created_at"
            >
              Created At
            </th>
            <td mat-cell *matCellDef="let element">
              {{
                (element && element.created_at ? element.created_at : "")
                  | date: dateformat
              }}
            </td>
          </ng-container>

          <!-- update_at column -->
          <ng-container matColumnDef="updated_at" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by updated_at"
            >
              Updated At
            </th>
            <td mat-cell *matCellDef="let element">
              {{
                (element && element.updated_at ? element.updated_at : "")
                  | date: dateformat
              }}
            </td>
          </ng-container>

          <!-- updated_by -->
          <ng-container matColumnDef="updated_by" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by updated_by"
            >
              Created By
            </th>
            <td mat-cell *matCellDef="let element">
              {{
                element && element.updated_by && element.updated_by.first_name
                  ? element.updated_by.first_name
                  : ""
              }}
              {{
                element && element.updated_by && element.updated_by.last_name
                  ? element.updated_by.last_name
                  : ""
              }}
            </td>
          </ng-container>
          <!--  Company Status  -->
          <ng-container matColumnDef="status" class="table-spacing">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              sortActionDescription="Sort by status"
            >
              Credit Approval Status
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element && element.status ? element.status : "" }}
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>

        <mat-paginator
          [pageSizeOptions]="[10, 20, 25]"
          showFirstLastButtons
          aria-label="Select page of periodic elements"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
</app-layout>
